
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Build a ChatBot &#8212; Unify Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/nbsphinx-code-cells.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css?v=7c465b21" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:100,200,300,regular,500,600,700,800,900" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../../../_static/documentation_options.js?v=3ce10a4d"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=4ea706d9"></script>
    <script src="../../../../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-QP5BET66XH"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-QP5BET66XH');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-QP5BET66XH');
            </script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'demos/demos/Unify/ChatBot/ChatBot';</script>
    <link rel="icon" href="https://github.com/unifyai/unifyai.github.io/blob/main/img/externally_linked/ivy_logo_only.png?raw=true"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Synchronous VS Asynchronous Clients" href="../AsyncVsSync/AsyncVsSync.html" />
    <link rel="prev" title="Python Package Examples" href="../../../unify.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar"><div id="unify-navbar"></div>
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../index.html">
                        Welcome to Unify!
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://api.unify.ai/v0/docs">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../api/unify_api.html">
                        Universal API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../api/benchmarks.html">
                        Benchmarking
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../api/router.html">
                        Routing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../docs/unify/unify.html">
                        <no title>
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../../../unify.html">
                        Python Package Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../langchain.html">
                        LangChain Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../llamaindex.html">
                        LlamaIndex Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../interfaces/connecting_stack.html">
                        Connecting your stack
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../interfaces/running_benchmarks.html">
                        Benchmarking endpoints
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../interfaces/building_router.html">
                        Building a custom router
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../concepts/endpoints.html">
                        Model Endpoints
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../concepts/benchmarks.html">
                        Benchmarks
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../../concepts/routing.html">
                        Routing
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
  aria-label="Section Navigation">
    <div class="bd-toc-item navbar-nav">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Welcome to Unify!</a></li>
<li class="toctree-l1"><a class="reference external" href="https://api.unify.ai/v0/docs">API Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../api/unify_api.html">Universal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/benchmarks.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/router.html">Routing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Client Docs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.clients.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.utils.html">Utils</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Demos</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../../unify.html">Python Package Examples</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Build a ChatBot</a></li>


<li class="toctree-l2"><a class="reference internal" href="../AsyncVsSync/AsyncVsSync.html">Synchronous VS Asynchronous Clients</a></li>

<li class="toctree-l2"><a class="reference internal" href="../LLM-Wars/README.html">LLM-Wars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SemanticRouter/README.html">Semantic Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chatbot_Arena/README.html">Chatbot Arena</a></li>
<li class="toctree-l2"><a class="reference internal" href="../LLM_Debate/README.html">AI Debate App</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../langchain.html">LangChain Examples</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../LangChain/RAG_playground/README.html">RAG Playground 🛝</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../llamaindex.html">LlamaIndex Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../LlamaIndex/RAGPlayground/README.html">RAG Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LlamaIndex/BasicUsage/unify.html">LlamaIndex</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Interfaces</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/connecting_stack.html">Connecting your stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/running_benchmarks.html">Benchmarking endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/building_router.html">Building a custom router</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/endpoints.html">Model Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/routing.html">Routing</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../../unify.html" class="nav-link">Python Package Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Build a ChatBot</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Build-a-ChatBot">
<h1>Build a ChatBot<a class="headerlink" href="#Build-a-ChatBot" title="Link to this heading">#</a></h1>
<p>In this notebook, we will build an interactive chatbot using the <code class="docutils literal notranslate"><span class="pre">unifyai</span></code> python package.</p>
<p>Under the hood, chatbots are very simple to implement. All LLM endpoints are stateless, and therefore the entire conversation history is repeatedly fed as input to the model. All that is required of the local agent is to store this history, and correctly pass it to the model.</p>
<section id="Install-Dependencies">
<h2>Install Dependencies<a class="headerlink" href="#Install-Dependencies" title="Link to this heading">#</a></h2>
<p>To run this notebook, you will need to install the <code class="docutils literal notranslate"><span class="pre">unifyai</span></code> <a class="reference external" href="https://pypi.org/project/unifyai/">python package</a>. You can do so by running the cell below ⬇️</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">unifyai</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Collecting unifyai==0.8.1
  Downloading unifyai-0.8.1-py3-none-any.whl (14 kB)
Requirement already satisfied: openai&lt;2.0.0,&gt;=1.12.0 in /usr/local/lib/python3.10/dist-packages (from unifyai==0.8.1) (1.17.1)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.31.0 in /usr/local/lib/python3.10/dist-packages (from unifyai==0.8.1) (2.31.0)
Requirement already satisfied: anyio&lt;5,&gt;=3.5.0 in /usr/local/lib/python3.10/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (3.7.1)
Requirement already satisfied: distro&lt;2,&gt;=1.7.0 in /usr/lib/python3/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (1.7.0)
Requirement already satisfied: httpx&lt;1,&gt;=0.23.0 in /usr/local/lib/python3.10/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (0.27.0)
Requirement already satisfied: pydantic&lt;3,&gt;=1.9.0 in /usr/local/lib/python3.10/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (2.6.4)
Requirement already satisfied: sniffio in /usr/local/lib/python3.10/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (1.3.1)
Requirement already satisfied: tqdm&gt;4 in /usr/local/lib/python3.10/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (4.66.2)
Requirement already satisfied: typing-extensions&lt;5,&gt;=4.7 in /usr/local/lib/python3.10/dist-packages (from openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (4.11.0)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;unifyai==0.8.1) (3.3.2)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;unifyai==0.8.1) (3.6)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;unifyai==0.8.1) (2.0.7)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;unifyai==0.8.1) (2024.2.2)
Requirement already satisfied: exceptiongroup in /usr/local/lib/python3.10/dist-packages (from anyio&lt;5,&gt;=3.5.0-&gt;openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (1.2.0)
Requirement already satisfied: httpcore==1.* in /usr/local/lib/python3.10/dist-packages (from httpx&lt;1,&gt;=0.23.0-&gt;openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (1.0.5)
Requirement already satisfied: h11&lt;0.15,&gt;=0.13 in /usr/local/lib/python3.10/dist-packages (from httpcore==1.*-&gt;httpx&lt;1,&gt;=0.23.0-&gt;openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (0.14.0)
Requirement already satisfied: annotated-types&gt;=0.4.0 in /usr/local/lib/python3.10/dist-packages (from pydantic&lt;3,&gt;=1.9.0-&gt;openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (0.6.0)
Requirement already satisfied: pydantic-core==2.16.3 in /usr/local/lib/python3.10/dist-packages (from pydantic&lt;3,&gt;=1.9.0-&gt;openai&lt;2.0.0,&gt;=1.12.0-&gt;unifyai==0.8.1) (2.16.3)
Installing collected packages: unifyai
  Attempting uninstall: unifyai
    Found existing installation: unifyai 0.8.0
    Uninstalling unifyai-0.8.0:
      Successfully uninstalled unifyai-0.8.0
Successfully installed unifyai-0.8.1
</pre></div></div>
</div>
</section>
<section id="The-Agent">
<h2>The Agent<a class="headerlink" href="#The-Agent" title="Link to this heading">#</a></h2>
<p>We define a simple chatbot class below, with the only public function being <code class="docutils literal notranslate"><span class="pre">run</span></code>. Before starting, you should to obtain a UNIFY key from the <a class="reference external" href="https://console.unify.ai/login?callbackUrl=%2F">console page</a> and assign it to the <code class="docutils literal notranslate"><span class="pre">UNIFY_KEY</span></code> variable below.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">UNIFY_KEY</span> <span class="o">=</span> <span class="c1">#ENTERUNIFYKEY</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="nn">unify</span> <span class="kn">import</span> <span class="n">Unify</span>


<span class="k">class</span> <span class="nc">ChatBot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Agent class represents an LLM chat agent.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">provider</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the ChatBot object.</span>

<span class="sd">        Args:</span>
<span class="sd">            api_key (str, optional): API key for accessing the Unify API.</span>
<span class="sd">                If None, it attempts to retrieve the API key from the</span>
<span class="sd">                environment variable UNIFY_KEY.</span>
<span class="sd">                Defaults to None.</span>

<span class="sd">            endpoint (str, optional): Endpoint name in OpenAI API format:</span>
<span class="sd">                &lt;uploaded_by&gt;/&lt;model_name&gt;@&lt;provider_name&gt;</span>
<span class="sd">                Defaults to None.</span>

<span class="sd">            model (str, optional): Name of the model. If None,</span>
<span class="sd">            endpoint must be provided.</span>

<span class="sd">            provider (str, optional): Name of the provider. If None,</span>
<span class="sd">            endpoint must be provided.</span>
<span class="sd">        Raises:</span>
<span class="sd">            UnifyError: If the API key is missing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paused</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">Unify</span><span class="p">(</span>
            <span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the client object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The model name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span>

    <span class="k">def</span> <span class="nf">set_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Unify</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the model name.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The unify client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the model name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The model name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">model</span>

    <span class="k">def</span> <span class="nf">set_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the model name.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The model name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_model</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">provider</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">provider</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">value</span><span class="p">,</span> <span class="n">mode</span><span class="p">]))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">provider</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the provider name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The provider name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">provider</span>

    <span class="k">def</span> <span class="nf">set_provider</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the provider name.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The provider name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_provider</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">value</span><span class="p">]))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the endpoint name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The endpoint name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">endpoint</span>

    <span class="k">def</span> <span class="nf">set_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the model name.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The endpoint name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_model</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">set_provider</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_get_credits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the current credit balance from associated with the UNIFY account.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Current credit balance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_credit_balance</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_process_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inp</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show_credits</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">show_provider</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Processes the user input to generate AI response.</span>

<span class="sd">        Args:</span>
<span class="sd">            inp (str): User input message.</span>
<span class="sd">            show_credits (bool): Whether to show credit consumption.</span>
<span class="sd">            show_credits (bool): Whether to show provider used.</span>

<span class="sd">        Yields:</span>
<span class="sd">            str: Generated AI response chunks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_message_history</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">inp</span><span class="p">)</span>
        <span class="n">initial_credit_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_credits</span><span class="p">()</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
            <span class="n">messages</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_history</span><span class="p">,</span>
            <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">words</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="n">chunk</span>
            <span class="k">yield</span> <span class="n">chunk</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_message_history</span><span class="p">(</span>
            <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">words</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">final_credit_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_credits</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">show_credits</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">(spent </span><span class="si">{:.6f}</span><span class="s2"> credits)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">initial_credit_balance</span> <span class="o">-</span> <span class="n">final_credit_balance</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">show_provider</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">(provider: </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">provider</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_update_message_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates message history with user input.</span>

<span class="sd">        Args:</span>
<span class="sd">            role (str): Either &quot;assistant&quot; or &quot;user&quot;.</span>
<span class="sd">            content (str): User input message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="n">role</span><span class="p">,</span>
                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear_chat_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears the chat history.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message_history</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show_credits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">show_provider</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts the chat interaction loop.</span>

<span class="sd">        Args:</span>
<span class="sd">            show_credits (bool, optional): Whether to show credit consumption.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">            show_provider (bool, optional): Whether to show the provider used.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paused</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_chat_history</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="s2">&quot;Welcome back! (Remember, enter `pause` to pause and `quit` to exit)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paused</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&gt; &quot;</span><span class="p">)</span>
            <span class="n">inp</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">inp</span> <span class="o">==</span> <span class="s2">&quot;quit&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clear_chat_history</span><span class="p">()</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">inp</span> <span class="o">==</span> <span class="s2">&quot;pause&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_paused</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_input</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="n">show_credits</span><span class="p">,</span> <span class="n">show_provider</span><span class="p">):</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="Let's-Chat">
<h2>Let’s Chat<a class="headerlink" href="#Let's-Chat" title="Link to this heading">#</a></h2>
<p>Now, we can instantiate and chat with this agent. For this demo, we’ll utilize the <code class="docutils literal notranslate"><span class="pre">llama-2-7b-chat</span></code> model from <code class="docutils literal notranslate"><span class="pre">anyscale</span></code>. However, you have the flexibility to select any model and provider from our supported options on the <a class="reference external" href="https://unify.ai/hub">benchmarks interface</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agent</span> <span class="o">=</span> <span class="n">ChatBot</span><span class="p">(</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">UNIFY_KEY</span><span class="p">,</span> <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;llama-2-70b-chat@anyscale&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)
&gt;  Hi, nice to meet you. My name is Foo Barrymore, and I am 25 years old.
  Hello Foo! Nice to meet you too. I&#39;m just an AI, I don&#39;t have a personal name, but I&#39;m here to help you with any questions or concerns you might have. How has your day been so far?
&gt; How old am I?
  You&#39;ve told me that you&#39;re 25 years old. Is there anything else you&#39;d like to know or discuss?
&gt; Your memory is astounding
  Thank you! I&#39;m glad you think so. I&#39;m designed to remember and process large amounts of information, and I&#39;m constantly learning and improving my abilities. However, it&#39;s important to note that my memory is not perfect, and there may be times when I forget or misremember certain details. If you have any specific questions or concerns about my memory or abilities, feel free to ask!
&gt; quit
</pre></div></div>
</div>
<p>You can also see how many credits your prompt used. This option is set in the constructor, but it can be overwritten during the run command. When enabled, each response from the chatbot will then be appended with the credits spent:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">show_credits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)
&gt; What is the capital of Palestine?
  The question of the capital of Palestine is a politically sensitive and complex issue. The status of Jerusalem is disputed between Israelis and Palestinians, with both sides claiming it as their capital.

The Palestinian National Authority, which governs the Palestinian territories in the West Bank and Gaza Strip, has its administrative center in Ramallah, which is often referred to as the &#34;de facto capital&#34; of Palestine. However, the Palestinian Authority has not declared a capital city, and the issue remains a matter of debate and negotiation in the Israeli-Palestinian peace process.

The international community has not recognized any capital of Palestine, and many countries maintain their diplomatic missions to the Palestinian Authority in Tel Aviv, Israel, rather than in Ramallah or East Jerusalem, which is claimed by the Palestinians as the capital of a future Palestinian state.

It is important to note that the issue of the capital of Palestine is closely tied to the broader conflict between Israelis and Palestinians, and any resolution to the conflict will need to address this issue in a way that is acceptable to both sides.
(spent 0.000274 credits)
&gt; quit
</pre></div></div>
</div>
<p>Finally, you can switch providers half-way through the conversation easily. This can be useful to handle prompt of varying complexity.</p>
<p>For example we can start with a small model for answering simple questions, such as recalling facts, and then move to a larger model for a more complex task, such as creative writing.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agent</span> <span class="o">=</span> <span class="n">ChatBot</span><span class="p">(</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">UNIFY_KEY</span><span class="p">,</span> <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;llama-2-70b-chat@anyscale&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">show_credits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)
&gt; What is the capital of Portugal?
  The capital of Portugal is Lisbon (Portuguese: Lisboa).
(spent 0.000032 credits)
&gt; My name is José Mourinho.
  Ah, I see! José Mourinho is a well-known Portuguese football manager and former football player. He has managed several top-level clubs, including Chelsea, Inter Milan, Real Madrid, and Manchester United. Mourinho is known for his tactical approach to football and his ability to motivate his players. He has won numerous honors and awards throughout his career, including several league titles, domestic cups, and European championships. Is there anything else you&#39;d like to know about José Mourinho?
(spent 0.000159 credits)
&gt; pause
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agent</span><span class="o">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="s2">&quot;gpt-4-turbo@openai&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">show_credits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Welcome back! (Remember, enter `pause` to pause and `quit` to exit)
&gt; Please write me a poem about my life in Lisbon, using my name in the poem.
In Lisbon&#39;s embrace, where tales intertwine,
Lives José Mourinho, beneath the sun&#39;s fine shine.
From cobblestone streets where echoes dance,
To the Tagus&#39; gentle waves that entrance.

In youth, he dreamt beneath Iberian skies,
Where passion is fierce and ambition never dies.
With a ball at his feet and dreams in his heart,
In Lisbon&#39;s grand story, he crafted his part.

Eduardo VII Park, in the spring&#39;s embrace,
Where thoughts of tactics first took place.
Through Alfama&#39;s alleys, past Fado&#39;s mournful sound,
Mourinho&#39;s purpose, in football, was found.

From Benfica&#39;s nest to União de Leiria&#39;s helm,
His journey began, in a realm
Where strategies and plays, meticulously spun,
Foreshadowed the triumphs that would be won.

In Estádio da Luz, where eagles soar,
Mourinho pondered scores and more.
Though his stay was brief, the impact was deep;
In Lisbon&#39;s lore, his legacy would steep.

The boy from Setúbal, with Lisbon in his tale,
Set forth to conquer, to win, and to prevail.
Through Porto, London, Milan, Madrid&#39;s grand stage,
His story was written, page by page.

Yet, amidst the victories and the fame&#39;s bright light,
In his heart, Lisbon remains, ever so bright.
For it&#39;s there José Mourinho&#39;s dreams took flight,
In Lisbon&#39;s embrace, under the starry night.

So, here&#39;s to Mourinho, with Lisbon&#39;s spirit in his veins,
Where the love for the game forever remains.
In every triumph, in every fall,
Lisbon, his beginning, the most cherished of all.
(spent 0.012020 credits)
&gt; quit
</pre></div></div>
</div>
<p>Switching between providers mid-conversation makes it much easier to maximize quality and runtime performance based on the latest metrics, and also save on costs!</p>
<p>In fact, you can automatically optimize for a metric of your choice with our <a class="reference external" href="https://unify.ai/docs/hub/concepts/runtime_routing.html#available-modes">dynamic routing modes</a>. For example, you can optimize for speed as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agent</span><span class="o">.</span><span class="n">set_endpoint</span><span class="p">(</span><span class="s2">&quot;llama-2-70b-chat@highest-tks-per-sec&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">show_provider</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)
&gt; Tell me your favorite physics fact.
My favorite physics fact is that the universe is still expanding! This means that the galaxies that are currently moving away from us will continue to move away from us, and eventually, they will move faster than the speed of light. This is known as the &#34;dark energy&#34; that is thought to be responsible for the acceleration of the universe&#39;s expansion.

I find this fascinating because it shows that the universe is still evolving and changing, and there is still so much to learn about it. It&#39;s mind-boggling to think about the vastness of space and the mysteries that it holds.

Additionally, this fact also reminds me of the importance of continuous learning and exploration. There is always more to discover and understand, and it&#39;s important to have a curious and open-minded approach to life.

I hope this fact inspires you to learn more about the wonders of the universe!
(provider: fireworks-ai)
&gt; quit
</pre></div></div>
</div>
<p>The flag <code class="docutils literal notranslate"><span class="pre">show_provider</span></code> ensures that the specific provider is printed at the end of each response. For example, sometimes <code class="docutils literal notranslate"><span class="pre">anyscale</span></code> might be the fastest, and at other times it might be <code class="docutils literal notranslate"><span class="pre">together-ai</span></code> or <code class="docutils literal notranslate"><span class="pre">fireworks-ai</span></code>. This flag enables you to keep track of what provider is being used under the hood.</p>
<p>If the task is to summarize a document or your chat history grows, typically the input-cost becomes the primary cost driver. You can use our <code class="docutils literal notranslate"><span class="pre">lowest-input-cost</span></code> mode to direct queries to the provider with the lowest input cost automatically.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agent</span> <span class="o">=</span> <span class="n">ChatBot</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">UNIFY_KEY</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;llama-2-70b-chat@lowest-input-cost&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">show_provider</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)
&gt; Summarize the following in less than 10 words: Sir Isaac Newton FRS (25 December 1642 – 20 March 1726/27[a]) was an English polymath active as a mathematician, physicist, astronomer, alchemist, theologian, and author who was described in his time as a natural philosopher.[7] He was a key figure in the Scientific Revolution and the Enlightenment that followed. His pioneering book Philosophiæ Naturalis Principia Mathematica (Mathematical Principles of Natural Philosophy), first published in 1687, consolidated many previous results and established classical mechanics.[8][9] Newton also made seminal contributions to optics, and shares credit with German mathematician Gottfried Wilhelm Leibniz for developing infinitesimal calculus, though he developed calculus years before Leibniz.[10][11]  In the Principia, Newton formulated the laws of motion and universal gravitation that formed the dominant scientific viewpoint for centuries until it was superseded by the theory of relativity. Newton used his mathematical description of gravity to derive Kepler&#39;s laws of planetary motion, account for tides, the trajectories of comets, the precession of the equinoxes and other phenomena, eradicating doubt about the Solar System&#39;s heliocentricity.[12] He demonstrated that the motion of objects on Earth and celestial bodies could be accounted for by the same principles. Newton&#39;s inference that the Earth is an oblate spheroid was later confirmed by the geodetic measurements of Maupertuis, La Condamine, and others, convincing most European scientists of the superiority of Newtonian mechanics over earlier systems.  Newton built the first practical reflecting telescope and developed a sophisticated theory of colour based on the observation that a prism separates white light into the colours of the visible spectrum. His work on light was collected in his highly influential book Opticks, published in 1704. He also formulated an empirical law of cooling, made the first theoretical calculation of the speed of sound, and introduced the notion of a Newtonian fluid. In addition to his work on calculus, as a mathematician Newton contributed to the study of power series, generalised the binomial theorem to non-integer exponents, developed a method for approximating the roots of a function, and classified most of the cubic plane curves.  Newton was a fellow of Trinity College and the second Lucasian Professor of Mathematics at the University of Cambridge. He was a devout but unorthodox Christian who privately rejected the doctrine of the Trinity. He refused to take holy orders in the Church of England, unlike most members of the Cambridge faculty of the day. Beyond his work on the mathematical sciences, Newton dedicated much of his time to the study of alchemy and biblical chronology, but most of his work in those areas remained unpublished until long after his death. Politically and personally tied to the Whig party, Newton served two brief terms as Member of Parliament for the University of Cambridge, in 1689–1690 and 1701–1702. He was knighted by Queen Anne in 1705 and spent the last three decades of his life in London, serving as Warden (1696–1699) and Master (1699–1727) of the Royal Mint, as well as president of the Royal Society (1703–1727).
  Newton: polymath, mathematician, physicist, astronomer, alchemist, theologian, and author.
(provider: octoai)
&gt; quit
</pre></div></div>
</div>
</section>
</section>
<section id="Python-Package">
<h1>Python Package<a class="headerlink" href="#Python-Package" title="Link to this heading">#</a></h1>
<p>The python package already contains the <code class="docutils literal notranslate"><span class="pre">ChatBot</span></code> agent and you may use it directly as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unify</span> <span class="kn">import</span> <span class="n">ChatBot</span>
<span class="n">chatbot</span> <span class="o">=</span> <span class="n">ChatBot</span><span class="p">(</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">UNIFY_KEY</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;llama-2-7b-chat@anyscale&quot;</span><span class="p">)</span>
<span class="n">chatbot</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Let&#39;s have a chat. (Enter `pause` to pause and `quit` to exit)
&gt; Hey! How&#39;s it going?
  Hello! I&#39;m doing well, thank you for asking! It&#39;s going great here, just busy with various tasks and learning new things. However, I must point out that this conversation is a bit unusual as I&#39;m just an AI and don&#39;t have personal experiences or emotions like humans do. I&#39;m here to help answer any questions you may have, so feel free to ask me anything!
&gt; quit
</pre></div></div>
</div>
</section>
<section id="Round-Up">
<h1>Round Up<a class="headerlink" href="#Round-Up" title="Link to this heading">#</a></h1>
<p>Congratulations! 🚀 You are now capable of building ChatBot Agents for your application using our LLM endpoints.</p>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../../../unify.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Python Package Examples</p>
      </div>
    </a>
    <a class="right-next"
       href="../AsyncVsSync/AsyncVsSync.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Synchronous VS Asynchronous Clients</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Build a ChatBot</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Install-Dependencies">Install Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-Agent">The Agent</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Let's-Chat">Let’s Chat</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Python-Package">Python Package</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Round-Up">Round Up</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
<script src="https://cdn.saas.unify.ai/js/unify-components-shared.js"></script>
<script src="https://cdn.saas.unify.ai/js/unify-components.js"></script>
<div id="navbar-contents" style="display: none;">
  
  <div class="navbar-header-items__end">
    
    <div class="navbar-item navbar-persistent--container">
      

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
    </div>
    
    
    <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
    
  </div>
  
</div>
<script>
  const html = `<div></div>`;
  const toc = `<nav class="bd-docs-nav bd-links"
  aria-label="Section Navigation">
    <div class="bd-toc-item navbar-nav">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Welcome to Unify!</a></li>
<li class="toctree-l1"><a class="reference external" href="https://api.unify.ai/v0/docs">API Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../api/unify_api.html">Universal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/benchmarks.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/router.html">Routing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Client Docs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.clients.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.exceptions.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/unify/unify/unify.utils.html">Utils</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Demos</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../../unify.html">Python Package Examples</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Build a ChatBot</a></li>


<li class="toctree-l2"><a class="reference internal" href="../AsyncVsSync/AsyncVsSync.html">Synchronous VS Asynchronous Clients</a></li>

<li class="toctree-l2"><a class="reference internal" href="../LLM-Wars/README.html">LLM-Wars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SemanticRouter/README.html">Semantic Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chatbot_Arena/README.html">Chatbot Arena</a></li>
<li class="toctree-l2"><a class="reference internal" href="../LLM_Debate/README.html">AI Debate App</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../langchain.html">LangChain Examples</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../LangChain/RAG_playground/README.html">RAG Playground 🛝</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../llamaindex.html">LlamaIndex Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../LlamaIndex/RAGPlayground/README.html">RAG Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LlamaIndex/BasicUsage/unify.html">LlamaIndex</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Interfaces</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/connecting_stack.html">Connecting your stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/running_benchmarks.html">Benchmarking endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/building_router.html">Building a custom router</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/endpoints.html">Model Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/routing.html">Routing</a></li>
</ul>

    </div>
</nav>`;
  initializeNavbar(html, true, toc);
  Promise.all([waitForElm("unify-navbar-end"), waitForElm("unify-mobile-navbar-end")]).then(([target, mobileTarget]) => {
    for (let elem of document.getElementById("navbar-contents").children) {
      target.children[0].appendChild(elem.cloneNode(true));
      mobileTarget.children[0].appendChild(elem.cloneNode(true));
    }
    document.getElementById("navbar-contents").remove();
    const scripts = `
  &lt!-- Scripts loaded after &ltbody&gt so the DOM is not blocked --&gt
  &ltscript src="../../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"&gt&lt/script&gt
&ltscript src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"&gt&lt/script&gt
`.replace(/&lt/g, "<").replace(/&gt/g, ">");
    const divFragment = document.createRange().createContextualFragment(scripts);
    document.body.prepend(divFragment);
  });
</script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2020-2023, Unify.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>