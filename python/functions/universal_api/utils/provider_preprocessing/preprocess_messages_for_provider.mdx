---
title: 'preprocess_messages_for_provider'
---

```python
def preprocess_messages_for_provider(
    messages: List[Dict[str, Any]],
    provider: Optional[str],
) -> List[Dict[str, Any]]:
```

<p align="right">[source code](https://github.com/unifyai/unify/tree/f9cdf2e53054097d485d787daa51b4f704c9025c/unify/universal_api/utils/provider_preprocessing.py#L205)</p>

Apply provider-specific preprocessing to messages.This is the main entry point for message preprocessing. It dispatches
to the appropriate provider-specific function based on the provider.

**Arguments**:

- `messages` - List of message dictionaries.
- `provider` - The provider string (e.g., "anthropic", "openai").



**Returns**:

Preprocessed messages (a new list, original is not modified).