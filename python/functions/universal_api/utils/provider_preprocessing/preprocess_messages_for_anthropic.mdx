---
title: 'preprocess_messages_for_anthropic'
---

```python
def preprocess_messages_for_anthropic(
    messages: List[Dict[str, Any]],
) -> List[Dict[str, Any]]:
```

<p align="right">[source code](https://github.com/unifyai/unify/tree/bc787fa5640b6da3ef126579b887a194e5f5100c/unify/universal_api/utils/provider_preprocessing.py#L132)</p>

Apply Anthropic-specific preprocessing to messages.This performs two transformations:
1. Move all system messages to the beginning of the list
2. Combine adjacent user messages into content array format

**Arguments**:

- `messages` - List of message dictionaries.



**Returns**:

Preprocessed messages (a new list, original is not modified).